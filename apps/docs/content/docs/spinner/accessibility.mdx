---
title: Accessibility
description: Accessibility guidelines and best practices for the spinner component
---

# Spinner Accessibility

This guide outlines how to implement accessible spinner components for all users, including those with disabilities who may be using screen readers or other assistive technologies.

## Key Accessibility Features

The Winner Spinner component includes several built-in accessibility features:

- **ARIA attributes and roles**: Components use appropriate ARIA roles, states, and properties
- **Screen reader announcements**: Important events like spin start and results are announced
- **Status updates**: Live regions announce spinner state changes
- **Visual and non-visual feedback**: Results communicated through multiple channels
- **High contrast support**: Compatible with high contrast modes
- **Animation control**: Options to adjust animation speed and behavior

## Current Implementation

Our spinner components implement the following accessibility features:

### ARIA Roles and Attributes

```tsx
// From spinner.tsx
<div 
  className={className ? `relative ${className}` : 'relative'}
  role="region"
  aria-label="Spinner wheel"
  aria-live={isAnimating ? 'assertive' : 'polite'}
>
  <div
    role="img"
    aria-label={`Spinner wheel with ${segments.length} options`}
    aria-hidden={isAnimating}
  >
    {...}
  </div>
  
  {/* Visually hidden text for screen readers */}
  <div className="sr-only" aria-live="assertive">
    {spinnerStatusText}
  </div>
</div>
```

### Screen Reader States

The component communicates its state to screen readers with text that's visually hidden but announced by assistive technology:

```tsx
// Status is dynamically determined based on current state
const spinnerStatusText = isAnimating 
  ? 'Spinner is currently spinning' 
  : (winner ? `Winner selected: ${winner.label}` : 'Spinner ready to spin');

// This is rendered in a visually hidden element
<div className="sr-only" aria-live="assertive">
  {spinnerStatusText}
</div>
```

## Implementation Guidelines

### ARIA Attributes

The spinner components automatically apply appropriate ARIA attributes, but you can customize them:

```tsx
<Spinner
  segments={[
    { id: '1', label: 'Option 1', value: 'one' },
    { id: '2', label: 'Option 2', value: 'two' }
  ]}
  ariaLabel="Prize selection spinner"
  accessibilityEnabled={true} // Default is true
/>
```

### Keyboard Navigation

For proper keyboard navigation, ensure your spinner is embedded in an interface that supports keyboard control:

```tsx
// Example of integrating with keyboard controls
<div onKeyDown={handleKeyDown}>
  <Spinner
    segments={segments}
    isSpinning={isSpinning}
    onSpinEnd={handleComplete}
  />
  <button onClick={() => setIsSpinning(true)}>
    Spin
  </button>
</div>

// Key handler implementation
const handleKeyDown = (e: React.KeyboardEvent) => {
  if (e.key === 'Enter' || e.key === ' ') {
    setIsSpinning(true);
    e.preventDefault();
  } else if (e.key === 'Escape') {
    // Optional: implement stop functionality
    setIsSpinning(false);
  }
};
```

### Animation Controls

Use the `duration` and `animationSpeed` props to control animation speed for users who may be sensitive to motion:

```tsx
<Spinner
  segments={segments}
  // Longer duration for slower animation
  duration={7}
  // Slow down animation further (values < 1)
  animationSpeed={0.75}
/>
```

### High Contrast Support

The Winner Spinner supports high contrast mode through the `highContrast` prop, which adjusts colors for better visibility:

```tsx
<Spinner
  segments={segments}
  primaryColor="#0000ff"    // Blue
  secondaryColor="#ffffff"  // White
  highContrast={true}
/>
```

## Testing Your Implementation

### Automated Testing

Our spinner components include Jest tests with accessibility checks using jest-axe:

```tsx
import { render } from '@testing-library/react';
import { axe, toHaveNoViolations } from 'jest-axe';
import { Spinner } from '../src/spinner';

// Add the custom matcher
expect.extend(toHaveNoViolations);

test('Spinner should have no accessibility violations', async () => {
  const { container } = render(
    <Spinner
      segments={testSegments}
      duration={5}
      primaryColor="#4f46e5"
      secondaryColor="#f97316"
    />
  );
  
  // Run axe on the rendered component
  const results = await axe(container);
  expect(results).toHaveNoViolations();
});
```

### Manual Testing

For thorough accessibility verification, perform these manual tests:

1. **Keyboard testing**:
   - Tab to focus the spinner control
   - Use Enter/Space to activate
   - Verify focus returns appropriately after completion

2. **Screen reader testing**:
   - Test with NVDA, JAWS, or VoiceOver
   - Verify announcements when spinner starts and stops
   - Check that the winner is properly announced

3. **Reduced motion**:
   - Test with OS-level "prefers-reduced-motion" enabled
   - Verify animations respect this setting

4. **Color contrast**:
   - Test with high contrast mode
   - Verify all text has sufficient contrast (4.5:1 for normal text)

## Common Accessibility Issues and Solutions

| Issue | Solution |
|-------|----------|
| Text not visible on spinner segments | Use the `highContrast` prop or adjust `primaryColor`/`secondaryColor` |
| Animation causes discomfort | Increase `duration` or decrease `animationSpeed` |
| Screen readers don't announce results | Ensure `accessibilityEnabled` is true (default) |
| Focus not properly managed | Implement custom focus management with `onSpinEnd` callback |

## Best Practices

1. **Use semantic HTML**: The spinner components use proper semantic structure
2. **Test with real assistive technology**: Automated tests don't catch everything
3. **Provide adequate contrast**: Text should have at least 4.5:1 contrast with its background
4. **Avoid relying solely on color**: Use text labels in addition to colors
5. **Announce important changes**: The spinner automatically announces state changes
6. **Manage focus appropriately**: Return focus to a logical element after spinner completes

## Complete Implementation Example

Here's a fully accessible spinner implementation:

```tsx
import { useState, useRef } from 'react';
import { Spinner, type SpinnerSegment } from '@repo/spinner';

export function AccessibleSpinner() {
  const [isSpinning, setIsSpinning] = useState(false);
  const [winner, setWinner] = useState<SpinnerSegment | null>(null);
  const resultRef = useRef<HTMLDivElement>(null);
  
  const segments: SpinnerSegment[] = [
    { id: '1', label: 'Option 1', value: '1' },
    { id: '2', label: 'Option 2', value: '2' },
    { id: '3', label: 'Option 3', value: '3' },
    { id: '4', label: 'Option 4', value: '4' },
  ];
  
  const handleSpin = () => {
    setWinner(null);
    setIsSpinning(true);
  };
  
  const handleComplete = (winner: SpinnerSegment) => {
    setWinner(winner);
    setIsSpinning(false);
    
    // Focus the result announcement for screen readers
    if (resultRef.current) {
      resultRef.current.focus();
    }
  };
  
  return (
    <div className="spinner-container">
      <h2 id="spinner-heading">Prize Spinner</h2>
      
      <div 
        aria-labelledby="spinner-heading"
        className="relative"
      >
        <Spinner
          segments={segments}
          duration={5}
          primaryColor="#4f46e5"
          secondaryColor="#f97316"
          isSpinning={isSpinning}
          onSpinEnd={handleComplete}
          showWinner={!!winner}
          ariaLabel="Prize selection spinner"
          highContrast={false}
          accessibilityEnabled={true}
          animationSpeed={1}
        />
      </div>
      
      <div className="controls mt-4">
        <button 
          onClick={handleSpin} 
          disabled={isSpinning}
          aria-controls="spinner-result"
        >
          {isSpinning ? "Spinning..." : "Spin the Wheel"}
        </button>
      </div>
      
      <div 
        id="spinner-result"
        ref={resultRef}
        tabIndex={-1}
        className="mt-4 p-3 border rounded"
        role="status"
        aria-live="polite"
      >
        {winner ? (
          <>
            <h3>Winner!</h3>
            <p>{winner.label} ({winner.value})</p>
          </>
        ) : (
          <p>Spin the wheel to select a winner</p>
        )}
      </div>
    </div>
  );
}
```

## Accessibility Props Reference

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `accessibilityEnabled` | boolean | `true` | Enable/disable accessibility features |
| `ariaLabel` | string | `"Spinner wheel"` | Custom ARIA label for the spinner |
| `highContrast` | boolean | `false` | Enable high contrast mode for better visibility |
| `animationSpeed` | number | `1` | Control animation speed (lower is slower) |
| `onSpinEnd` | function | - | Callback when spinning completes, use for focus management |

## Resources

- [Web Content Accessibility Guidelines (WCAG) 2.1](https://www.w3.org/TR/WCAG21/)
- [WAI-ARIA Authoring Practices](https://www.w3.org/TR/wai-aria-practices-1.1/)
- [MDN Accessibility Guide](https://developer.mozilla.org/en-US/docs/Web/Accessibility)
- [React Accessibility Docs](https://reactjs.org/docs/accessibility.html)
- [Testing with Jest-Axe](https://github.com/nickcolley/jest-axe)